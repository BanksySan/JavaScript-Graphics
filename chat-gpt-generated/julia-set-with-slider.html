<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Julia Set</title>
  <style>
      canvas {
          width: 100%;
          height: 100%;
      }
  </style>
</head>
<body>
<label for="real-slider">Real Part of Seed:</label>
<input
  id="real-slider"
  max="2"
  min="-2"
  step="0.01"
  type="range"
  value="-0.7"
/>
<label for="imag-slider">Imaginary Part of Seed:</label>
<input
  id="imag-slider"
  max="2"
  min="-2"
  step="0.01"
  type="range"
  value="0.27015"
/>
<label for="res-slider">Resolution:</label>
<input
  id="res-slider"
  max="1000"
  min="100"
  step="100"
  type="range"
  value="500"
/>
<canvas id="canvas"></canvas>
<script>
  const canvas = document.getElementById("canvas");
  const ctx = canvas.getContext("2d");

  let width = canvas.width;
  let height = canvas.height;

  let cReal = -0.7;
  let cImaginary = 0.27015;

  const xmin = -1.5;
  const xmax = 1.5;
  const ymin = -1.5;
  const ymax = 1.5;

  let maxIterations = 100;

  const realSlider = document.getElementById("real-slider");
  realSlider.addEventListener("input", function() {
    cReal = parseFloat(realSlider.value);
    drawJuliaSet(cReal, cImaginary, maxIterations);
  });

  const imagSlider = document.getElementById("imag-slider");
  imagSlider.addEventListener("input", function() {
    cImaginary = parseFloat(imagSlider.value);
    drawJuliaSet(cReal, cImaginary, maxIterations);
  });

  const resSlider = document.getElementById("res-slider");
  resSlider.addEventListener("input", function() {
    width = parseFloat(resSlider.value);
    height = parseFloat(resSlider.value);
    canvas.width = width;
    canvas.height = height;
    drawJuliaSet(cReal, cImaginary, maxIterations);
  });

  function drawJuliaSet(cReal, cImaginary, maxIterations) {
    for (let x = 0; x < width; x++) {
      for (let y = 0; y < height; y++) {
        let zx = xmin + ((xmax - xmin) * x) / width;
        let zy = ymin + ((ymax - ymin) * y) / height;
        let iteration = 0;
        while (
          iteration < maxIterations &&
          zx * zx + zy * zy < 4
          ) {
          const tmp = zx * zx - zy * zy + cReal;
          zy = 2 * zx * zy + cImaginary;
          zx = tmp;
          iteration++;
        }
        const color =
          iteration === maxIterations
            ? "#000"
            : `hsl(${iteration * 4}, 100%, 50%)`;
        ctx.fillStyle = color;
        ctx.fillRect(x, y, 1, 1);
      }
    }
  }

  drawJuliaSet(cReal, cImaginary, maxIterations);
</script>
</body>
</html>
